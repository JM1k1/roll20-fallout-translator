// ==UserScript==
// @name         Roll20 Fallout Translator
// @namespace    https://github.com/JM1k1/roll20-fallout-translator
// @version      2.0.0
// @description  Русификатор Fallout Character Sheet для Roll20
// @author       Yuliy Mitryashkin
// @license      MIT
// @icon         https://jm1k1.github.io/roll20-fallout-translator/assets/icon.svg
// @homepage     https://github.com/JM1k1/roll20-fallout-translator
// @supportURL   https://github.com/JM1k1/roll20-fallout-translator/issues
// @updateURL    https://jm1k1.github.io/roll20-fallout-translator/dist/roll20-fallout-translator.user.js
// @downloadURL  https://jm1k1.github.io/roll20-fallout-translator/dist/roll20-fallout-translator.user.js
// @match        https://app.roll20.net/editor/*
// @run-at       document-idle
// @grant        none
// ==/UserScript==

(()=>{var r={Add:"Добавить","Action Points":"Очки Действий",agility:"Ловкость",Agility:"Ловкость",AGILITY:"ЛОВКОСТЬ",Ammo:"Боепр.","Ammo Type":"Тип Боеприпасов",ARM:"РУКА",Armor:"Броня","Armor Mods":"Модификации Брони",Athletics:"Атлетика",Attribute:"Атрибут","Auto-roll Damage For Attacks":"Автоматически бросать урон при атаках",Barrel:"Ствол",Barter:"Торговля",Benefit:"Преимущество","Big Guns":"Бол. оружие",Bio:"Био","Bonus Carry Weight":"Бонус Переносимого Веса",Bonus:"Бонус","Books and Magazines":"Книги и Журналы",Caps:"Крышки","Carry Weight":"Перенос. Вес","Character Name":"Имя персонажа",charisma:"Харизма",Charisma:"Харизма",CHARISMA:"ХАРИЗМА",Chems:"Химикаты","Click 'Add' to get started":"Нажмите 'Добавить', чтобы начать",Close:"Закрыть",Clothing:"Одежда","Clothing Mods":"Модификации Одежды",Combat:"Бой",Core:"Основ",Cost:"Цена",Damage:"Урон","Damage Type":"Тип Урона",Defense:"Защита",Dehydrated:"Обезвожен",Description:"Описание",Diseases:"Заболевания",'Display "Roll Additional" Button On Damage Rolls':'Показывать кнопку "Доп. бросок" при уроне',"Display Assist Button On Skill Tests":"Показывать кнопку помощи при проверках навыков",Done:"Готово",Duration:"Продолжительность",Effects:"Эффекты","En. DR":"Энер. СУ",Encumbrance:"Нагрузка",endurance:"Выносливость",Endurance:"Выносливость",ENDURANCE:"ВЫНОСЛИВОСТЬ","Energy DR":"Энергетическое СУ","Energy Weapon":"Энерг. оружие","Energy Weapons":"Энерг. оружие","Equip Location":"Место Размещения",Equipped:"Экипировано",Exhausted:"Истощен",Explosives:"Взрывчатка",Fatigue:"Усталость","Fire Rate":"Скорост.","Food and Drink":"Еда и Напитки",Full:"Сыт",Gear:"Снаряжение",Gold:"Золото",Grip:"Рукоятка",HEAD:"ГОЛОВА",Headgear:"Головной Убор","Health Points":"Очки здоровья",HP:"ОЗ","HP Healed":"ОЗ Восстановленно",Hunger:"Голод",Hungry:"Голоден",Hydrated:"Гидратирован",Imm:"Имм",Immune:"Иммунитет",Initiative:"Инициатива",Injuries:"Травмы",intelligence:"Интеллект",Intelligence:"Интеллект",INTELLIGENCE:"ИНТЕЛЛЕКТ","Irradiated?":"Облученно?","LEFT ARM":"ЛЕВАЯ РУКА","LEFT LEG":"ЛЕВАЯ НОГА",Level:"Уровень",Location:"Расположение","Locations Covered":"Покрываемые Части Тела",Lockpick:"Взлом замков",luck:"Удача",Luck:"Удача",LUCK:"УДАЧА","Luck Points":"Очки Удачи",Magazine:"Магазин","MAIN BODY":"КОРПУС","Max HP":"Макс. ОЗ","Max Rank":"Макс. Ранг",Medicine:"Медицина","Melee Bonus":"Бонус Ближнего Боя","Melee Weapon":"Хол. оружие","Melee Weapons":"Хол. оружие",Modifier:"Модификатор",Modify:"Изменить",Mods:"Моды",Muzzle:"Дуло",Name:"Название","New Money":"Новые Деньги",No:"Нет","NPC Automation":"Автоматизация НИП","NPC Character":"Персонаж НИП","NPC Creature":"Существо НИП",OPTICS:"ОПТИКА",Origin:"Происхождение",Other:"Прочее","Other Consumables":"Другие Расходные Материалы","Other Effects":"Другие Эффекты",Outfit:"Наряд","PC Automation":"Автоматизация Персонажа",Peckish:"Проголодался",Penalty:"Недостаток",perception:"Восприятие",Perception:"Восприятие",PERCEPTION:"ВОСПРИЯТИЕ",Perks:"Перки","Phys. DR":"Физ. СУ","Physical DR":"Физическое СУ",Pilot:"Пилотирование","Player Character":"Персонаж",Poison:"Яд","Pre-War Money":"Довоенные Деньги",Qualities:"Качества",Quantity:"Количество",Quenched:"Напоен","Query For Additional Combat Dice On Damage Rolls":"Запрашивать доп. боевые кости при уроне","Rad. DR":"Рад. СУ","Radiation DR":"Радиационное СУ",Range:"Дальн.","Rank Increase Effect":"Эффект повышения ранга",Rank:"Ранг",Rarity:"Редкость",Receiver:"Приемник",Repair:"Ремонт",Rested:"Отдохнувший","RIGHT ARM":"ПРАВАЯ РУКА","RIGHT LEG":"ПРАВАЯ НОГА","Robot Mods":"Модификации Роботов",Sated:"Доволен",Science:"Наука",Scrip:"Скрип","Select Clothing Type":"Выберите Тип Одежды",Settings:"Настройки",Sheet:"Лист","Show Combat Dice Results On Damage Rolls":"Показывать боевые кости при броске урона",Sight:"Прицел",Skill:"Навык",Skills:"Навыки",Sleep:"Сон","Small Guns":"Мал. оружие",Sneak:"Скрытность",Special:"Особенности",Speech:"Красноречие",Starving:"Голодает",Stock:"Ложа",strength:"Сила",Strength:"Сила",STRENGTH:"СИЛА",Survival:"Выживание",Tag:"Тэг",Thirst:"Жажда",Thirsty:"Хочет Пить",Throwing:"Метание",THRUSTER:"ДВИГАТЕЛЬ",Tired:"Устал",TN:"ЦН","Toggle Robot Sheet":"Переключить Лист Робота",TORSO:"ТОРС","Total Weight":"Общий Вес",Traits:"Черты",Type:"Тип",Unarmed:"Ближ. бой","Valid Locations":"Допустимые Части Тела","Weapon Mods":"Модификации Оружия","Weapon Type":"Тип оружия",Weapons:"Оружие",Weary:"Измотан",Weight:"Вес","Well Rested":"Хорошо Отдохнул","Whisper Rolls to GM":"Броски шёпотом ГМу","XP Earned":"Опыт","XP to Next Level":"Опыта до Cлед. Ур.",Yes:"Да","You are Healthy":"Вы Здоровы","You are Uninjured":"Вы не Ранены","You don't have any Ammo yet":"У вас пока нет Боеприпасов","You don't have any Armor Mods yet":"У вас пока нет Модов Брони","You don't have any Armor yet":"У вас пока нет Брони","You don't have any Books yet":"У вас пока нет Книг","You don't have any Chems yet":"У вас пока нет Химикатов","You don't have any Clothing Mods yet":"У вас пока нет Модов Одежды","You don't have any Clothing yet":"У вас пока нет Одежды","You don't have any Food or Drinks yet":"У вас пока нет Еды или Напитков","You don't have any Other Consumables yet":"У вас пока нет Других Расходных Материалов","You don't have any Other Gear yet":"У вас пока нет Прочее Снаряжение","You don't have any Perks yet":"У вас пока нет Перков","You don't have any Robot Mods yet":"У вас пока нет Модов Роботов","You don't have any Traits yet":"У вас пока нет Черт","You don't have any Weapon Mods yet":"У вас пока нет Модов Оружия","You don't have any Weapons yet":"У вас пока нет Оружия",Physical:"Физический",Energy:"Энергетический",Radiation:"Радиационный","Physical/Radiation":"Физический/Радиационный","Physical/Poison":"Физический/Ядовитый","Radiation/Energy":"Радиационный/Энергетический","Physical/Energy":"Физический/Энергетический","Radiation/Poison":"Радиационный/Ядовитый","Energy/Poison":"Энергетический/Ядовитый",physical:"Физический",energy:"Энергетический",radiation:"Радиационный",poison:"Ядовитый","physical radiation":"Физический Радиационный","physical poison":"Физический Ядовитый","radiation energy":"Радиационный Энергетический","radiation poison":"Радиационный Ядовитый","physical energy":"Физический Энергетический","energy poison":"Энергетический Ядовитый",Explosive:"Взрывчатка",PC:"ИП",NPC:"НИП",Successes:"Успехи","Roll Damage":"Бросок урона",Target:"Цель","Roll to Assist":"Бросок помощи"};var p=["placeholder","title"];function m(e){if(!(e instanceof HTMLElement))return;let t=e.innerText,a=t.replace(/^\P{L}+|\P{L}+$/gu,"").trim(),o=r[a];o&&(e.innerText=t.replace(a,o));for(let n of p)f(e,n)}function f(e,t){if(!e.hasAttribute(t))return;let a=e.getAttribute(t)?.trim(),o=r[a];o&&e.setAttribute(t,o)}function i(e,t){e.querySelectorAll(t).forEach(o=>{m(o)})}function s(e,t,a={childList:!0,attributes:!0,characterData:!0,subtree:!0}){i(e,t);let o=new MutationObserver(n=>{for(let y of n)y.type==="childList"&&i(e,t)});return o.observe(e,a),o}function l(e){let t=document.createElement("style");return t.rel="stylesheet",t.textContent=e,document.head.appendChild(t),t}var c=`.charsheet .sheet-pc .sheet-pc-gear-currency::after{content:"Валюта"}\r
.charsheet .sheet-pc .sheet-pc-gear-stats::after{content:"Нагрузка"}`;var h=`.charsheet .sheet-roll-bar label{margin-left:12px}\r
.charsheet .sheet-character-bar .sheet-header-field input{width:auto}\r
.charsheet .sheet-robot-sheet-control{width:auto}`;var u=`@font-face {\r
    font-family: 'sriracha';\r
    src: url('https://jm1k1.github.io/roll20-fallout-translator/assets/sriracha-cyrillic.woff2');\r
}`;var T=["[data-i18n]","[data-i18n-placeholder]","[data-i18n-title]","label.sheet-special-color","div[class^=sheet-template] > label[class^=sheet-]","span.sheet-form-component",'button[class*="repcontrol"]','span[name^="attr_pc_"]'].join(", "),E=["#textchat",".charsheet"].join(", "),C={childList:!0,attributes:!0,characterData:!0,subtree:!0};[c,h,u].forEach(l);var A=document.querySelectorAll(E);A.forEach(e=>{s(e,T,C)});})();
